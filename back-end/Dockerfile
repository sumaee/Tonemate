FROM gradle:jdk11
LABEL name = "lyeong-gwa"
LABEL email = "wjdgmll77@naver.com"

ARG DB_URL
ARG DB_USER
ARG DB_PASSWORD
ARG BUCKET_NAME
ARG AWS_SECRET_KEY
ARG AWS_ACCESS_KEY
ARG KAKAO_SECRET
ARG KAKAO_ID
ARG GOOGLE_SECRET
ARG GOOGLE_ID
ARG JWT_SECRET
ARG REDIS_HOST

ENV DB_URL=$DB_URL
ENV DB_USER=$DB_USER
ENV DB_PASSWORD=$DB_PASSWORD
ENV BUCKET_NAME=$BUCKET_NAME
ENV AWS_SECRET_KEY=$AWS_SECRET_KEY
ENV AWS_ACCESS_KEY=$AWS_ACCESS_KEY
ENV KAKAO_SECRET=$KAKAO_SECRET
ENV KAKAO_ID=$KAKAO_ID
ENV GOOGLE_SECRET=$GOOGLE_SECRET
ENV GOOGLE_ID=$GOOGLE_ID
ENV JWT_SECRET=$JWT_SECRET
ENV REDIS_HOST=$REDIS_HOST

COPY ./tonemate /tonemate
RUN cd /tonemate && chmod +x ./gradlew && ./gradlew bootJar 
# 우분투 환경에서 직접 build하고 처리할 때 사용
